{
  "active": true,
  "activeVersion": {
    "updatedAt": "2026-02-04T11:59:33.010Z",
    "createdAt": "2026-02-04T11:56:17.152Z",
    "versionId": "fb3fbc57-9f72-4528-b165-44f47a274486",
    "workflowId": "d9WBjvBuF5ARKm3RvgqSp",
    "nodes": [
      {
        "parameters": {
          "updates": [
            "*"
          ],
          "additionalFields": {
            "chatIds": ""
          }
        },
        "type": "n8n-nodes-base.telegramTrigger",
        "typeVersion": 1.2,
        "position": [
          -784,
          832
        ],
        "id": "cdef7081-1127-4abc-8dbd-358eaace1499",
        "name": "Telegram Trigger",
        "webhookId": "0f55084e-c453-4149-8627-94a97313c8b8",
        "credentials": {
          "telegramApi": {
            "id": "L4Ks7F6VyzIkogXY",
            "name": "–£–º–Ω—ã–π –¥–æ–º"
          }
        }
      },
      {
        "parameters": {
          "chatId": "={{ $json.message.from.id }}",
          "text": "–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É —á—Ç–æ–±—ã –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è",
          "replyMarkup": "replyKeyboard",
          "replyKeyboard": {
            "rows": [
              {
                "row": {
                  "buttons": [
                    {
                      "text": "üîº –ü–æ–∫–∞–∑–∞—Ç—å –∫–Ω–æ–ø–∫–∏ üîº",
                      "additionalFields": {}
                    }
                  ]
                }
              }
            ]
          },
          "replyKeyboardOptions": {
            "resize_keyboard": true
          },
          "additionalFields": {
            "appendAttribution": false
          }
        },
        "type": "n8n-nodes-base.telegram",
        "typeVersion": 1.2,
        "position": [
          -112,
          640
        ],
        "id": "497e188b-129b-4892-9aca-705bd95fe5b4",
        "name": "start",
        "webhookId": "9f534039-81ba-4071-8ae9-5ccc323cdd0c",
        "credentials": {
          "telegramApi": {
            "id": "L4Ks7F6VyzIkogXY",
            "name": "–£–º–Ω—ã–π –¥–æ–º"
          }
        }
      },
      {
        "parameters": {
          "chatId": "={{ $json.message.from.id }}",
          "text": "–í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è",
          "replyMarkup": "inlineKeyboard",
          "inlineKeyboard": {
            "rows": [
              {
                "row": {
                  "buttons": [
                    {
                      "text": "–°–ø–∞–ª—å–Ω—è   üü¢  ",
                      "additionalFields": {
                        "callback_data": "–°–ø–∞–ª—å–Ω—è_on"
                      }
                    },
                    {
                      "text": "–°–ø–∞–ª—å–Ω—è   üî¥  ",
                      "additionalFields": {
                        "callback_data": "–°–ø–∞–ª—å–Ω—è_off"
                      }
                    }
                  ]
                }
              },
              {
                "row": {
                  "buttons": [
                    {
                      "text": "–ó–∞–ª             üü¢  ",
                      "additionalFields": {
                        "callback_data": "–ó–∞–ª_on"
                      }
                    },
                    {
                      "text": "–ó–∞–ª             üî¥  ",
                      "additionalFields": {
                        "callback_data": "–ó–∞–ª_off"
                      }
                    }
                  ]
                }
              },
              {
                "row": {
                  "buttons": [
                    {
                      "text": "–ö–æ—Ä–∏–¥–æ—Ä   üü¢  ",
                      "additionalFields": {
                        "callback_data": "–ö–æ—Ä–∏–¥–æ—Ä_on"
                      }
                    },
                    {
                      "text": "–ö–æ—Ä–∏–¥–æ—Ä   üî¥  ",
                      "additionalFields": {
                        "callback_data": "–ö–æ—Ä–∏–¥–æ—Ä_off"
                      }
                    }
                  ]
                }
              },
              {
                "row": {
                  "buttons": [
                    {
                      "text": "–í–∞–Ω–Ω–∞—è        üü¢  ",
                      "additionalFields": {
                        "callback_data": "–í–∞–Ω–Ω–∞—è_on"
                      }
                    },
                    {
                      "text": "–í–∞–Ω–Ω–∞—è        üî¥  ",
                      "additionalFields": {
                        "callback_data": "–í–∞–Ω–Ω–∞—è_off"
                      }
                    }
                  ]
                }
              },
              {
                "row": {
                  "buttons": [
                    {
                      "text": "–ö—É—Ö–Ω—è         üü¢  ",
                      "additionalFields": {
                        "callback_data": "–ö—É—Ö–Ω—è_on"
                      }
                    },
                    {
                      "text": "–ö—É—Ö–Ω—è         üî¥  ",
                      "additionalFields": {
                        "callback_data": "–ö—É—Ö–Ω—è_off"
                      }
                    }
                  ]
                }
              },
              {},
              {
                "row": {
                  "buttons": [
                    {
                      "text": "–®—Ç–æ—Ä—ã      üü¢  ",
                      "additionalFields": {
                        "callback_data": "–®—Ç–æ—Ä—ã_on"
                      }
                    },
                    {
                      "text": "–®—Ç–æ—Ä—ã      üî¥  ",
                      "additionalFields": {
                        "callback_data": "–®—Ç–æ—Ä—ã_off"
                      }
                    }
                  ]
                }
              },
              {
                "row": {
                  "buttons": [
                    {
                      "text": "–ü—ã–ª–µ—Å–æ—Å   üü¢  ",
                      "additionalFields": {
                        "callback_data": "–ü—ã–ª–µ—Å–æ—Å_on"
                      }
                    },
                    {
                      "text": "–ü—ã–ª–µ—Å–æ—Å   üî¥  ",
                      "additionalFields": {
                        "callback_data": "–ü—ã–ª–µ—Å–æ—Å_off"
                      }
                    }
                  ]
                }
              },
              {
                "row": {
                  "buttons": [
                    {
                      "text": "–í—ã–∫–ª—é—á–∏—Ç—å —Å–≤–µ—Ç –≤–µ–∑–¥–µ       üî¥  ",
                      "additionalFields": {
                        "callback_data": "–°–≤–µ—Ç_off"
                      }
                    }
                  ]
                }
              },
              {
                "row": {
                  "buttons": [
                    {
                      "text": "–î–æ–º–æ—Ñ–æ–Ω   üè†  ",
                      "additionalFields": {
                        "callback_data": "–î–æ–º–æ—Ñ–æ–Ω_scenario"
                      }
                    }
                  ]
                }
              }
            ]
          },
          "additionalFields": {
            "appendAttribution": false
          }
        },
        "type": "n8n-nodes-base.telegram",
        "typeVersion": 1.2,
        "position": [
          -112,
          832
        ],
        "id": "ca69a312-c1d0-40b5-a033-782ab52b4e32",
        "name": "–í—ã–≤–æ–¥ –∫–Ω–æ–ø–æ–∫",
        "webhookId": "6b2d1573-159e-4030-8ee6-40ac53afaf30",
        "credentials": {
          "telegramApi": {
            "id": "L4Ks7F6VyzIkogXY",
            "name": "–£–º–Ω—ã–π –¥–æ–º"
          }
        }
      },
      {
        "parameters": {
          "rules": {
            "values": [
              {
                "conditions": {
                  "options": {
                    "caseSensitive": true,
                    "leftValue": "",
                    "typeValidation": "strict",
                    "version": 2
                  },
                  "conditions": [
                    {
                      "leftValue": "={{ $json.message.text }}",
                      "rightValue": "/start",
                      "operator": {
                        "type": "string",
                        "operation": "equals"
                      },
                      "id": "1a83bb80-1b44-4aff-be80-a966e097b3a6"
                    }
                  ],
                  "combinator": "and"
                }
              },
              {
                "conditions": {
                  "options": {
                    "caseSensitive": true,
                    "leftValue": "",
                    "typeValidation": "strict",
                    "version": 2
                  },
                  "conditions": [
                    {
                      "id": "58ef493f-c698-47ec-90df-f9fe09ee73c4",
                      "leftValue": "={{ $json.message.text }}",
                      "rightValue": "üîº –ü–æ–∫–∞–∑–∞—Ç—å –∫–Ω–æ–ø–∫–∏ üîº",
                      "operator": {
                        "type": "string",
                        "operation": "equals",
                        "name": "filter.operator.equals"
                      }
                    }
                  ],
                  "combinator": "and"
                }
              }
            ]
          },
          "options": {
            "fallbackOutput": "extra"
          }
        },
        "type": "n8n-nodes-base.switch",
        "typeVersion": 3.3,
        "position": [
          -336,
          816
        ],
        "id": "0740f1cc-501b-4374-b1c1-57c6d7fb7f58",
        "name": "–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä"
      },
      {
        "parameters": {
          "content": "## –¢–µ–ª–µ–≥—Ä–∞–º–º –±–æ—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏ —É–º–Ω–æ–≥–æ –¥–æ–º–∞\n–í—ã–≤–æ–¥–∏—Ç –≤ —Ç–µ–ª–µ–≥—Ä–∞–º–º —Å–ø–∏—Å–æ–∫ –∫–Ω–æ–ø–æ–∫ –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è –∏ –≤—ã–∫–ª—é—á–µ–Ω–∏—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –∏ –∫–Ω–æ–ø–∫—É –≤—ã–∫–ª—é—á–µ–Ω–∏—è –≤—Å–µ–≥–æ –≤–µ—Ä—Ö–Ω–µ–≥–æ —Å–≤–µ—Ç–∞",
          "width": 400
        },
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          -816,
          576
        ],
        "typeVersion": 1,
        "id": "0f95e473-b6ec-4174-b99d-5cd852c73a9d",
        "name": "Sticky Note"
      },
      {
        "parameters": {
          "language": "pythonNative",
          "pythonCode": "# –í—ã—è—Å–Ω—è–µ–º –∫—Ç–æ —á—Ç–æ —Å–¥–µ–ª–∞–ª –∏ –≥–æ—Ç–æ–≤–∏–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏—è\n\n# –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ —Å–æ–æ–±—â–µ–Ω–∏—è\nmessage = _items[0][\"json\"][\"callback_query\"]\n\n# –£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞\ndevices_id = {\n  \"–í–∞–Ω–Ω–∞—è\": \"2f9f9cc8-ada2-4bde-bd85-b9885ae28f36\",\n  \"–ö–æ—Ä–∏–¥–æ—Ä\": \"65bcfad0-4759-4cb7-8654-7584b2fc96d0\",\n  \"–ö—É—Ö–Ω—è\": \"a56d4cb7-621e-44ba-b825-4e9606a7acb4\",\n  \"–ó–∞–ª\": \"b0adbe30-5b28-40d1-9bf2-ba15aadd70bb\",\n  \"–°–ø–∞–ª—å–Ω—è\": \"f6826740-39db-484e-9e3e-2b2a7ed2f5ee\",\n  \"–õ–µ–Ω—Ç–∞\": \"\",\n  \"–ü—ã–ª–µ—Å–æ—Å\": \"2d5b0ab8-7880-4d79-a368-6120be845bfc\",\n  \"–®—Ç–æ—Ä—ã\": \"0197d9e0-ca35-4ea2-a31a-51516c63cdfe\", \n  \"–î–æ–º–æ—Ñ–æ–Ω\": \"90632374-cc25-4911-81a7-5792fa888a16\"\n}\n\n# –¢–æ–ª—å–∫–æ –≤–µ—Ä—Ö–Ω–∏–π —Å–≤–µ—Ç\nlight_up = [\n  \"2f9f9cc8-ada2-4bde-bd85-b9885ae28f36\",  # –í–∞–Ω–Ω–∞—è\n  \"65bcfad0-4759-4cb7-8654-7584b2fc96d0\",  # –ö–æ—Ä–∏–¥–æ—Ä\n  \"a56d4cb7-621e-44ba-b825-4e9606a7acb4\",  # –ö—É—Ö–Ω—è\n  \"b0adbe30-5b28-40d1-9bf2-ba15aadd70bb\",  # –ó–∞–ª\n  \"f6826740-39db-484e-9e3e-2b2a7ed2f5ee\"   # –°–ø–∞–ª—å–Ω—è\n]\n\nkey = message.get(\"data\")  # –ü—Ä–∏—à–ª–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –∫–Ω–æ–ø–∫–∏\ndevice_action = key.split(\"_\")  # –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –∏ –¥–µ–π—Å—Ç–≤–∏–µ\n\ndata = {}  # –û—Ç–≤–µ—Ç\nif len(device_action) == 2:\n  # –°–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ –Ω–∞–∂–∞—Ç–∞ –∫–Ω–æ–ø–∫–∞\n  action = None  # –î–µ–π—Å—Ç–≤–∏–µ\n  type = \"action\"\n  if device_action[0] in devices_id:\n    # –°—á–∏—Ç–∞–µ–º —á—Ç–æ –Ω–∞–∂–∞—Ç–∞ –∫–Ω–æ–ø–∫–∞\n    device_id = devices_id[device_action[0]]  # –ù–∞–∑–≤–∞–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞\n    \n    if device_action[1] == \"off\":\n      # –í—ã–∫–ª—é—á–µ–Ω–∏–µ\n      action = False\n    elif device_action[1] == \"on\":\n      # –í–∫–ª—é—á–µ–Ω–∏–µ\n      action = True\n    elif device_action[1] == \"scenario\":\n      # –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏—è\n      type = \"scenario\"\n      action = \"scenario\"\n      \n  else:\n    # –£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –Ω–µ—Ç –≤ —Å–ø–∏—Å–∫–µ. –í–æ–∑–º–æ–∂–Ω–æ —ç—Ç–æ –æ–±—â–∞—è –∫–æ–º–∞–Ω–¥–∞\n    if device_action[0] == \"–°–≤–µ—Ç\":\n      # –û–±—â–∞—è –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è –≤—ã–∫–ª—é—á–µ–Ω–∏—è —Å–≤–µ—Ç–∞\n      data = []\n      for device_id in light_up:\n        cmd = {\n          \"type\": type,\n          \"action\": False,\n          \"device_id\": device_id,\n        }\n        data.append({\"json\": {\"data\": cmd}})\n      return data\n\n# –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏ —Ñ–æ—Ä–º–∏—Ä—É–µ–º –æ—Ç–≤–µ—Ç\nif action is not None:\n  data = {\n    \"type\": type,\n    \"action\": action,\n    \"device_id\": device_id,\n  }\n\nreturn [{\"json\": {\"data\": data}}]"
        },
        "type": "n8n-nodes-base.code",
        "typeVersion": 2,
        "position": [
          -112,
          1024
        ],
        "id": "38ce079e-fcc6-4cf9-9825-821b8e6098cc",
        "name": "–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è",
        "onError": "continueRegularOutput"
      },
      {
        "parameters": {
          "url": "https://api.iot.yandex.net/v1.0/user/info",
          "sendHeaders": true,
          "headerParameters": {
            "parameters": [
              {
                "name": "Authorization",
                "value": "OAuth y0__xCz9dpKGIv0OyDi3uOzFR-JFhcGUUpU-lK-xYzT8FIkJVEQ"
              }
            ]
          },
          "options": {}
        },
        "type": "n8n-nodes-base.httpRequest",
        "typeVersion": 4.3,
        "position": [
          -800,
          304
        ],
        "id": "9fbdc251-da02-49e3-9a19-d13fbcded7b5",
        "name": "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± —É–º–Ω–æ–º –¥–æ–º–µ"
      },
      {
        "parameters": {
          "method": "POST",
          "url": "https://api.iot.yandex.net/v1.0/devices/actions",
          "sendHeaders": true,
          "headerParameters": {
            "parameters": [
              {
                "name": "Authorization",
                "value": "OAuth y0__xCz9dpKGIv0OyDi3uOzFR-JFhcGUUpU-lK-xYzT8FIkJVEQ"
              }
            ]
          },
          "sendBody": true,
          "specifyBody": "json",
          "jsonBody": "{\n    \"devices\": [\n        {\n            \"id\": \"9af46f0f-c0b5-4604-9240-476eea453f8f\",\n            \"actions\": [\n                {\n                    \"type\": \"devices.capabilities.on_off\",\n                    \"state\": {\n                        \"instance\": \"on\",\n                        \"value\": true\n                    }\n                }\n            ]\n        }\n    ]\n}",
          "options": {}
        },
        "type": "n8n-nodes-base.httpRequest",
        "typeVersion": 4.3,
        "position": [
          -528,
          304
        ],
        "id": "2a437612-be64-4348-8cf2-9696da3f9203",
        "name": "–ü—Ä–æ–±–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è"
      },
      {
        "parameters": {
          "content": "## –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ \n–î–ª—è –≤—ã–∫–ª—é—á–µ–Ω–∏—è –∏ –≤–∫–ª—é—á–µ–Ω–∏—è –º–µ–Ω—è—Ç—å true/false\n``` json\n\"state\": {\n    \"instance\": \"on\",\n    \"value\": true\n }\n```",
          "height": 208
        },
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          -560,
          64
        ],
        "typeVersion": 1,
        "id": "6b10d7bb-b486-4adc-b158-a20a471dbf94",
        "name": "Sticky Note1"
      },
      {
        "parameters": {
          "content": "## –Ø–Ω–¥–µ–∫—Å\n\n### API –£–º–Ω—ã–π –¥–æ–º\nhttps://yandex.ru/dev/dialogs/smart-home/doc/ru/concepts/platform-protocol\n\n### –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è\nhttps://oauth.yandex.ru/client/new/api\n\n### –°—Ç–∞—Ç—å—è –ø—Ä–æ –æ—Ç–ª–∞–¥–∫—É —Ç–æ–∫–µ–Ω–∞ (Debug Token): \nhttps://yandex.ru/dev/id/doc/ru/tokens/debug-token\n\n1. –ó–∞–π—Ç–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç\n2. –ü–µ—Ä–µ–π—Ç–∏ –∫ —Å–æ–∑–¥–∞–Ω–∏—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è\n3. –ù–∞–∑–≤–∞–Ω–∏–µ - –ª—é–±–æ–µ\n4. –î–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º\n    - iot: view - —Å–ø–∏—Å–æ–∫ —É—Å—Ç—Ä–æ–π—Å—Ç–≤\n    - iot: control -  —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏\n5. –í –ø–æ–ª–µ Redirect URI –≤–≤–µ–¥–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ\nhttps://oauth.yandex.ru/verification_code \n6. –°–æ–∑–¥–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ\n7. –ù–∞ –Ω–æ–≤–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∫–æ–ø–∏—Ä—É–µ–º Client ID\n8. –ü–µ—Ä–µ—Ö–æ–¥ –ø–æ —Å—Å—ã–ª–∫–µ –≤–∏–¥–∞:\nhttps://oauth.yandex.ru/authorize?response_type=token&client_id=<–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è>\n9. –ö–æ–ø–∏—Ä—É–µ–º –ø–æ–ª—É—á–µ–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω, –µ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å—Ç—Ä–æ–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.\n",
          "height": 768,
          "width": 560
        },
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          -1488,
          64
        ],
        "typeVersion": 1,
        "id": "c43daeb3-eed5-4e92-86c6-54f8e0cf1354",
        "name": "Sticky Note2"
      },
      {
        "parameters": {
          "method": "POST",
          "url": "https://api.iot.yandex.net/v1.0/scenarios/90632374-cc25-4911-81a7-5792fa888a16/actions",
          "sendHeaders": true,
          "headerParameters": {
            "parameters": [
              {
                "name": "Authorization",
                "value": "OAuth y0__xCz9dpKGIv0OyDi3uOzFR-JFhcGUUpU-lK-xYzT8FIkJVEQ"
              }
            ]
          },
          "options": {}
        },
        "type": "n8n-nodes-base.httpRequest",
        "typeVersion": 4.3,
        "position": [
          96,
          304
        ],
        "id": "592ace33-3aab-48e9-ba84-28fa01eccdfc",
        "name": "–ü—Ä–æ–±–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è1"
      },
      {
        "parameters": {
          "content": "## –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏—è\nhttps://yandex.ru/dev/dialogs/smart-home/doc/ru/concepts/platform-scenario\n\n–ê–¥—Ä–µ—Å –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Å—Ü–µ–Ω–∞—Ä–∏—è: `https://api.iot.yandex.net/v1.0/scenarios/{scenario_id}/actions`\n\nPOST –∑–∞–ø—Ä–æ—Å –±–µ–∑ —Ç–µ–ª–∞. –ü—Ä–∏–º–µ—Ä (–¥–ª—è –¥–æ–º–æ—Ñ–æ–Ω–∞): \n\nhttps://api.iot.yandex.net/v1.0/scenarios/90632374-cc25-4911-81a7-5792fa888a16/actions",
          "height": 272,
          "width": 400
        },
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          0,
          0
        ],
        "typeVersion": 1,
        "id": "4f7aae7c-41d2-4bea-b20b-db252e3508ec",
        "name": "Sticky Note3"
      },
      {
        "parameters": {
          "conditions": {
            "options": {
              "caseSensitive": true,
              "leftValue": "",
              "typeValidation": "strict",
              "version": 2
            },
            "conditions": [
              {
                "id": "923f3c47-f0e8-4582-a293-ce320e67a5a7",
                "leftValue": "={{ $json.data.type }}",
                "rightValue": "scenario",
                "operator": {
                  "type": "string",
                  "operation": "equals",
                  "name": "filter.operator.equals"
                }
              },
              {
                "id": "eb4f00c7-84ad-4763-8e38-ee401014bad5",
                "leftValue": "",
                "rightValue": "",
                "operator": {
                  "type": "string",
                  "operation": "equals",
                  "name": "filter.operator.equals"
                }
              }
            ],
            "combinator": "and"
          },
          "options": {}
        },
        "type": "n8n-nodes-base.if",
        "typeVersion": 2.2,
        "position": [
          96,
          1024
        ],
        "id": "70132fa9-4f42-430d-909c-6cda5e9e01d7",
        "name": "If"
      },
      {
        "parameters": {
          "method": "POST",
          "url": "https://api.iot.yandex.net/v1.0/devices/actions",
          "sendHeaders": true,
          "headerParameters": {
            "parameters": [
              {
                "name": "Authorization",
                "value": "OAuth y0__xCz9dpKGIv0OyDi3uOzFR-JFhcGUUpU-lK-xYzT8FIkJVEQ"
              }
            ]
          },
          "sendBody": true,
          "specifyBody": "json",
          "jsonBody": "={\n    \"devices\": [\n        {\n            \"id\": \"{{ $json.data.device_id }}\",\n            \"actions\": [\n                {\n                    \"type\": \"devices.capabilities.on_off\",\n                    \"state\": {\n                        \"instance\": \"on\",\n                        \"value\": {{ $json.data.action }}\n                    }\n                }\n            ]\n        }\n    ]\n}",
          "options": {
            "timeout": 500
          }
        },
        "type": "n8n-nodes-base.httpRequest",
        "typeVersion": 4.3,
        "position": [
          320,
          1120
        ],
        "id": "f51411e1-8877-4735-a475-184b70771d54",
        "name": "–î–µ–π—Å—Ç–≤–∏–µ —Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ–º",
        "retryOnFail": true,
        "waitBetweenTries": 200,
        "onError": "continueRegularOutput"
      },
      {
        "parameters": {
          "method": "POST",
          "url": "=https://api.iot.yandex.net/v1.0/scenarios/{{ $json.data.device_id }}/actions",
          "sendHeaders": true,
          "headerParameters": {
            "parameters": [
              {
                "name": "Authorization",
                "value": "OAuth y0__xCz9dpKGIv0OyDi3uOzFR-JFhcGUUpU-lK-xYzT8FIkJVEQ"
              }
            ]
          },
          "options": {
            "timeout": 500
          }
        },
        "type": "n8n-nodes-base.httpRequest",
        "typeVersion": 4.3,
        "position": [
          320,
          928
        ],
        "id": "9df1565a-221f-41ad-a168-7aa3f956d93b",
        "name": "–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏—è",
        "retryOnFail": true,
        "waitBetweenTries": 200
      },
      {
        "parameters": {
          "jsCode": "// –í—ã—è—Å–Ω—è–µ–º –∫—Ç–æ —á—Ç–æ —Å–¥–µ–ª–∞–ª –∏ –≥–æ—Ç–æ–≤–∏–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏—è\n\n// –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ —Å–æ–æ–±—â–µ–Ω–∏—è (–ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞—è, —á—Ç–æ _items –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ –≤ –≤–∞—à–µ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏)\nconst message = $input.first().json.callback_query;\n\n// –£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞\nconst devicesId = {\n  \"–í–∞–Ω–Ω–∞—è\": \"2f9f9cc8-ada2-4bde-bd85-b9885ae28f36\",\n  \"–ö–æ—Ä–∏–¥–æ—Ä\": \"65bcfad0-4759-4cb7-8654-7584b2fc96d0\",\n  \"–ö—É—Ö–Ω—è\": \"a56d4cb7-621e-44ba-b825-4e9606a7acb4\",\n  \"–ó–∞–ª\": \"b0adbe30-5b28-40d1-9bf2-ba15aadd70bb\",\n  \"–°–ø–∞–ª—å–Ω—è\": \"9af46f0f-c0b5-4604-9240-476eea453f8f\",\n  \"–õ–µ–Ω—Ç–∞\": \"\",\n  \"–ü—ã–ª–µ—Å–æ—Å\": \"2d5b0ab8-7880-4d79-a368-6120be845bfc\",\n  \"–®—Ç–æ—Ä—ã\": \"0197d9e0-ca35-4ea2-a31a-51516c63cdfe\",\n  \"–î–æ–º–æ—Ñ–æ–Ω\": \"90632374-cc25-4911-81a7-5792fa888a16\"\n};\n\n// –¢–æ–ª—å–∫–æ –≤–µ—Ä—Ö–Ω–∏–π —Å–≤–µ—Ç\nconst lightUp = [\n  \"2f9f9cc8-ada2-4bde-bd85-b9885ae28f36\",  // –í–∞–Ω–Ω–∞—è\n  \"65bcfad0-4759-4cb7-8654-7584b2fc96d0\",  // –ö–æ—Ä–∏–¥–æ—Ä\n  \"a56d4cb7-621e-44ba-b825-4e9606a7acb4\",  // –ö—É—Ö–Ω—è\n  \"b0adbe30-5b28-40d1-9bf2-ba15aadd70bb\",  // –ó–∞–ª\n  \"f6826740-39db-484e-9e3e-2b2a7ed2f5ee\"   // –°–ø–∞–ª—å–Ω—è\n];\n\nconst key = message.data; // –ü—Ä–∏—à–ª–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –∫–Ω–æ–ø–∫–∏\nconst deviceAction = key.split(\"_\"); // –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –∏ –¥–µ–π—Å—Ç–≤–∏–µ\n\nlet data = {}; // –û—Ç–≤–µ—Ç (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –æ–±—ä–µ–∫—Ç)\n\nif (deviceAction.length === 2) {\n  let action = null;\n  let type = \"action\";\n  let deviceId;\n  const [deviceName, actionType] = deviceAction; // –î–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏–∑–∞—Ü–∏—è –¥–ª—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏\n\n  if (deviceName in devicesId) {\n    deviceId = devicesId[deviceName];\n\n    if (actionType === \"off\") {\n      action = false;\n    } else if (actionType === \"on\") {\n      action = true;\n    } else if (actionType === \"scenario\") {\n      type = \"scenario\";\n      action = \"scenario\";\n    }\n\n  } else {\n    // –£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –Ω–µ—Ç –≤ —Å–ø–∏—Å–∫–µ. –í–æ–∑–º–æ–∂–Ω–æ —ç—Ç–æ –æ–±—â–∞—è –∫–æ–º–∞–Ω–¥–∞\n    if (deviceName === \"–°–≤–µ—Ç\") {\n      // –û–±—â–∞—è –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è –≤—ã–∫–ª—é—á–µ–Ω–∏—è —Å–≤–µ—Ç–∞\n      const responseDataList = [];\n      for (const id of lightUp) {\n        const cmd = {\n          \"type\": type,\n          \"action\": false,\n          \"device_id\": id,\n        };\n        responseDataList.push({\"json\": {\"data\": cmd}});\n      }\n      // –í–Ω–∏–º–∞–Ω–∏–µ: –ó–¥–µ—Å—å –º—ã –∏–º–∏—Ç–∏—Ä—É–µ–º \"return data\" –∏–∑ Python, \n      // —Å—Ä–∞–∑—É –≤–æ–∑–≤—Ä–∞—â–∞—è –º–∞—Å—Å–∏–≤ –∏ –∑–∞–≤–µ—Ä—à–∞—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞.\n      return responseDataList;\n      // data = responseDataList; // –ó–∞–º–µ–Ω—è–µ–º –æ–±—ä–µ–∫—Ç –Ω–∞ –º–∞—Å—Å–∏–≤\n    }\n  }\n\n  // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏ —Ñ–æ—Ä–º–∏—Ä—É–µ–º –æ—Ç–≤–µ—Ç –¥–ª—è –æ–¥–∏–Ω–æ—á–Ω–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è\n  if (action !== null && deviceId) {\n    data = {\n      \"type\": type,\n      \"action\": action,\n      \"device_id\": deviceId,\n    };\n  }\n}\n\nreturn [{\"json\": {\"data\": data}}]; // –ò—Ç–æ–≥–æ–≤—ã–π –≤–æ–∑–≤—Ä–∞—Ç –¥–∞–Ω–Ω—ã—Ö, –µ—Å–ª–∏ data –Ω–µ –º–∞—Å—Å–∏–≤\n\n"
        },
        "type": "n8n-nodes-base.code",
        "typeVersion": 2,
        "position": [
          -112,
          1184
        ],
        "id": "d803f92b-cc6e-4cd4-9283-43ea5115811b",
        "name": "Code in JavaScript1"
      },
      {
        "parameters": {
          "language": "pythonNative",
          "pythonCode": "# –ö—Ç–æ –º–æ–∂–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å\ntrue_ids = [249503190, 326830581]\n\nquery = _items[0][\"json\"]\n\nfrom_id = 0\nif query.get(\"message\"):\n  from_id = query[\"message\"][\"from\"][\"id\"]\nelse:\n  from_id = query[\"callback_query\"][\"from\"][\"id\"]\n\nif from_id in true_ids:\n  return query\nreturn [{\"json\": {}}]"
        },
        "type": "n8n-nodes-base.code",
        "typeVersion": 2,
        "position": [
          -560,
          832
        ],
        "id": "077811ca-5e82-45a9-a4e1-b049e7798442",
        "name": "–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è py"
      },
      {
        "parameters": {
          "jsCode": "// –ö—Ç–æ –º–æ–∂–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å\nconst true_ids = [249503190, 326830581];\n\nconst query = $input.first().json;\n\nlet from_id = 0;\nif (query.message) {\n  from_id = query.message.from.id;\n} else {\n  from_id = query.callback_query.from.id;\n}\n\nif (true_ids.includes(from_id)) {\n  return query;\n}\n\nreturn [{ json: {} }];\n"
        },
        "type": "n8n-nodes-base.code",
        "typeVersion": 2,
        "position": [
          -560,
          1008
        ],
        "id": "b71a73c0-8bce-4087-94d6-276480818ba5",
        "name": "–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è"
      }
    ],
    "connections": {
      "Telegram Trigger": {
        "main": [
          [
            {
              "node": "–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä": {
        "main": [
          [
            {
              "node": "start",
              "type": "main",
              "index": 0
            }
          ],
          [
            {
              "node": "–í—ã–≤–æ–¥ –∫–Ω–æ–ø–æ–∫",
              "type": "main",
              "index": 0
            }
          ],
          [
            {
              "node": "Code in JavaScript1",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "If": {
        "main": [
          [
            {
              "node": "–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏—è",
              "type": "main",
              "index": 0
            }
          ],
          [
            {
              "node": "–î–µ–π—Å—Ç–≤–∏–µ —Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ–º",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Code in JavaScript1": {
        "main": [
          [
            {
              "node": "If",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è": {
        "main": [
          [
            {
              "node": "–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä",
              "type": "main",
              "index": 0
            }
          ]
        ]
      }
    },
    "authors": "–ê–ª–µ–∫—Å–µ–π –ö",
    "name": "Version fb3fbc57",
    "description": "",
    "autosaved": true
  },
  "activeVersionId": "fb3fbc57-9f72-4528-b165-44f47a274486",
  "connections": {
    "Telegram Trigger": {
      "main": [
        [
          {
            "node": "–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä": {
      "main": [
        [
          {
            "node": "start",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "–í—ã–≤–æ–¥ –∫–Ω–æ–ø–æ–∫",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Code in JavaScript1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If": {
      "main": [
        [
          {
            "node": "–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏—è",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "–î–µ–π—Å—Ç–≤–∏–µ —Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ–º",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript1": {
      "main": [
        [
          {
            "node": "If",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è": {
      "main": [
        [
          {
            "node": "–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "createdAt": "2026-02-04T11:55:28.236Z",
  "id": "d9WBjvBuF5ARKm3RvgqSp",
  "isArchived": false,
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "name": "–£–º–Ω—ã–π –¥–æ–º Telegram bot",
  "nodes": [
    {
      "parameters": {
        "updates": [
          "*"
        ],
        "additionalFields": {
          "chatIds": ""
        }
      },
      "type": "n8n-nodes-base.telegramTrigger",
      "typeVersion": 1.2,
      "position": [
        -784,
        832
      ],
      "id": "cdef7081-1127-4abc-8dbd-358eaace1499",
      "name": "Telegram Trigger",
      "webhookId": "0f55084e-c453-4149-8627-94a97313c8b8",
      "credentials": {
        "telegramApi": {
          "id": "L4Ks7F6VyzIkogXY",
          "name": "–£–º–Ω—ã–π –¥–æ–º"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $json.message.from.id }}",
        "text": "–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É —á—Ç–æ–±—ã –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è",
        "replyMarkup": "replyKeyboard",
        "replyKeyboard": {
          "rows": [
            {
              "row": {
                "buttons": [
                  {
                    "text": "üîº –ü–æ–∫–∞–∑–∞—Ç—å –∫–Ω–æ–ø–∫–∏ üîº",
                    "additionalFields": {}
                  }
                ]
              }
            }
          ]
        },
        "replyKeyboardOptions": {
          "resize_keyboard": true
        },
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -112,
        640
      ],
      "id": "497e188b-129b-4892-9aca-705bd95fe5b4",
      "name": "start",
      "webhookId": "9f534039-81ba-4071-8ae9-5ccc323cdd0c",
      "credentials": {
        "telegramApi": {
          "id": "L4Ks7F6VyzIkogXY",
          "name": "–£–º–Ω—ã–π –¥–æ–º"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $json.message.from.id }}",
        "text": "–í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è",
        "replyMarkup": "inlineKeyboard",
        "inlineKeyboard": {
          "rows": [
            {
              "row": {
                "buttons": [
                  {
                    "text": "–°–ø–∞–ª—å–Ω—è   üü¢  ",
                    "additionalFields": {
                      "callback_data": "–°–ø–∞–ª—å–Ω—è_on"
                    }
                  },
                  {
                    "text": "–°–ø–∞–ª—å–Ω—è   üî¥  ",
                    "additionalFields": {
                      "callback_data": "–°–ø–∞–ª—å–Ω—è_off"
                    }
                  }
                ]
              }
            },
            {
              "row": {
                "buttons": [
                  {
                    "text": "–ó–∞–ª             üü¢  ",
                    "additionalFields": {
                      "callback_data": "–ó–∞–ª_on"
                    }
                  },
                  {
                    "text": "–ó–∞–ª             üî¥  ",
                    "additionalFields": {
                      "callback_data": "–ó–∞–ª_off"
                    }
                  }
                ]
              }
            },
            {
              "row": {
                "buttons": [
                  {
                    "text": "–ö–æ—Ä–∏–¥–æ—Ä   üü¢  ",
                    "additionalFields": {
                      "callback_data": "–ö–æ—Ä–∏–¥–æ—Ä_on"
                    }
                  },
                  {
                    "text": "–ö–æ—Ä–∏–¥–æ—Ä   üî¥  ",
                    "additionalFields": {
                      "callback_data": "–ö–æ—Ä–∏–¥–æ—Ä_off"
                    }
                  }
                ]
              }
            },
            {
              "row": {
                "buttons": [
                  {
                    "text": "–í–∞–Ω–Ω–∞—è        üü¢  ",
                    "additionalFields": {
                      "callback_data": "–í–∞–Ω–Ω–∞—è_on"
                    }
                  },
                  {
                    "text": "–í–∞–Ω–Ω–∞—è        üî¥  ",
                    "additionalFields": {
                      "callback_data": "–í–∞–Ω–Ω–∞—è_off"
                    }
                  }
                ]
              }
            },
            {
              "row": {
                "buttons": [
                  {
                    "text": "–ö—É—Ö–Ω—è         üü¢  ",
                    "additionalFields": {
                      "callback_data": "–ö—É—Ö–Ω—è_on"
                    }
                  },
                  {
                    "text": "–ö—É—Ö–Ω—è         üî¥  ",
                    "additionalFields": {
                      "callback_data": "–ö—É—Ö–Ω—è_off"
                    }
                  }
                ]
              }
            },
            {},
            {
              "row": {
                "buttons": [
                  {
                    "text": "–®—Ç–æ—Ä—ã      üü¢  ",
                    "additionalFields": {
                      "callback_data": "–®—Ç–æ—Ä—ã_on"
                    }
                  },
                  {
                    "text": "–®—Ç–æ—Ä—ã      üî¥  ",
                    "additionalFields": {
                      "callback_data": "–®—Ç–æ—Ä—ã_off"
                    }
                  }
                ]
              }
            },
            {
              "row": {
                "buttons": [
                  {
                    "text": "–ü—ã–ª–µ—Å–æ—Å   üü¢  ",
                    "additionalFields": {
                      "callback_data": "–ü—ã–ª–µ—Å–æ—Å_on"
                    }
                  },
                  {
                    "text": "–ü—ã–ª–µ—Å–æ—Å   üî¥  ",
                    "additionalFields": {
                      "callback_data": "–ü—ã–ª–µ—Å–æ—Å_off"
                    }
                  }
                ]
              }
            },
            {
              "row": {
                "buttons": [
                  {
                    "text": "–í—ã–∫–ª—é—á–∏—Ç—å —Å–≤–µ—Ç –≤–µ–∑–¥–µ       üî¥  ",
                    "additionalFields": {
                      "callback_data": "–°–≤–µ—Ç_off"
                    }
                  }
                ]
              }
            },
            {
              "row": {
                "buttons": [
                  {
                    "text": "–î–æ–º–æ—Ñ–æ–Ω   üè†  ",
                    "additionalFields": {
                      "callback_data": "–î–æ–º–æ—Ñ–æ–Ω_scenario"
                    }
                  }
                ]
              }
            }
          ]
        },
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -112,
        832
      ],
      "id": "ca69a312-c1d0-40b5-a033-782ab52b4e32",
      "name": "–í—ã–≤–æ–¥ –∫–Ω–æ–ø–æ–∫",
      "webhookId": "6b2d1573-159e-4030-8ee6-40ac53afaf30",
      "credentials": {
        "telegramApi": {
          "id": "L4Ks7F6VyzIkogXY",
          "name": "–£–º–Ω—ã–π –¥–æ–º"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.message.text }}",
                    "rightValue": "/start",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "1a83bb80-1b44-4aff-be80-a966e097b3a6"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "58ef493f-c698-47ec-90df-f9fe09ee73c4",
                    "leftValue": "={{ $json.message.text }}",
                    "rightValue": "üîº –ü–æ–∫–∞–∑–∞—Ç—å –∫–Ω–æ–ø–∫–∏ üîº",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {
          "fallbackOutput": "extra"
        }
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.3,
      "position": [
        -336,
        816
      ],
      "id": "0740f1cc-501b-4374-b1c1-57c6d7fb7f58",
      "name": "–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä"
    },
    {
      "parameters": {
        "content": "## –¢–µ–ª–µ–≥—Ä–∞–º–º –±–æ—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏ —É–º–Ω–æ–≥–æ –¥–æ–º–∞\n–í—ã–≤–æ–¥–∏—Ç –≤ —Ç–µ–ª–µ–≥—Ä–∞–º–º —Å–ø–∏—Å–æ–∫ –∫–Ω–æ–ø–æ–∫ –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è –∏ –≤—ã–∫–ª—é—á–µ–Ω–∏—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –∏ –∫–Ω–æ–ø–∫—É –≤—ã–∫–ª—é—á–µ–Ω–∏—è –≤—Å–µ–≥–æ –≤–µ—Ä—Ö–Ω–µ–≥–æ —Å–≤–µ—Ç–∞",
        "width": 400
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -816,
        576
      ],
      "typeVersion": 1,
      "id": "0f95e473-b6ec-4174-b99d-5cd852c73a9d",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "language": "pythonNative",
        "pythonCode": "# –í—ã—è—Å–Ω—è–µ–º –∫—Ç–æ —á—Ç–æ —Å–¥–µ–ª–∞–ª –∏ –≥–æ—Ç–æ–≤–∏–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏—è\n\n# –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ —Å–æ–æ–±—â–µ–Ω–∏—è\nmessage = _items[0][\"json\"][\"callback_query\"]\n\n# –£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞\ndevices_id = {\n  \"–í–∞–Ω–Ω–∞—è\": \"2f9f9cc8-ada2-4bde-bd85-b9885ae28f36\",\n  \"–ö–æ—Ä–∏–¥–æ—Ä\": \"65bcfad0-4759-4cb7-8654-7584b2fc96d0\",\n  \"–ö—É—Ö–Ω—è\": \"a56d4cb7-621e-44ba-b825-4e9606a7acb4\",\n  \"–ó–∞–ª\": \"b0adbe30-5b28-40d1-9bf2-ba15aadd70bb\",\n  \"–°–ø–∞–ª—å–Ω—è\": \"f6826740-39db-484e-9e3e-2b2a7ed2f5ee\",\n  \"–õ–µ–Ω—Ç–∞\": \"\",\n  \"–ü—ã–ª–µ—Å–æ—Å\": \"2d5b0ab8-7880-4d79-a368-6120be845bfc\",\n  \"–®—Ç–æ—Ä—ã\": \"0197d9e0-ca35-4ea2-a31a-51516c63cdfe\", \n  \"–î–æ–º–æ—Ñ–æ–Ω\": \"90632374-cc25-4911-81a7-5792fa888a16\"\n}\n\n# –¢–æ–ª—å–∫–æ –≤–µ—Ä—Ö–Ω–∏–π —Å–≤–µ—Ç\nlight_up = [\n  \"2f9f9cc8-ada2-4bde-bd85-b9885ae28f36\",  # –í–∞–Ω–Ω–∞—è\n  \"65bcfad0-4759-4cb7-8654-7584b2fc96d0\",  # –ö–æ—Ä–∏–¥–æ—Ä\n  \"a56d4cb7-621e-44ba-b825-4e9606a7acb4\",  # –ö—É—Ö–Ω—è\n  \"b0adbe30-5b28-40d1-9bf2-ba15aadd70bb\",  # –ó–∞–ª\n  \"f6826740-39db-484e-9e3e-2b2a7ed2f5ee\"   # –°–ø–∞–ª—å–Ω—è\n]\n\nkey = message.get(\"data\")  # –ü—Ä–∏—à–ª–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –∫–Ω–æ–ø–∫–∏\ndevice_action = key.split(\"_\")  # –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –∏ –¥–µ–π—Å—Ç–≤–∏–µ\n\ndata = {}  # –û—Ç–≤–µ—Ç\nif len(device_action) == 2:\n  # –°–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ –Ω–∞–∂–∞—Ç–∞ –∫–Ω–æ–ø–∫–∞\n  action = None  # –î–µ–π—Å—Ç–≤–∏–µ\n  type = \"action\"\n  if device_action[0] in devices_id:\n    # –°—á–∏—Ç–∞–µ–º —á—Ç–æ –Ω–∞–∂–∞—Ç–∞ –∫–Ω–æ–ø–∫–∞\n    device_id = devices_id[device_action[0]]  # –ù–∞–∑–≤–∞–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞\n    \n    if device_action[1] == \"off\":\n      # –í—ã–∫–ª—é—á–µ–Ω–∏–µ\n      action = False\n    elif device_action[1] == \"on\":\n      # –í–∫–ª—é—á–µ–Ω–∏–µ\n      action = True\n    elif device_action[1] == \"scenario\":\n      # –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏—è\n      type = \"scenario\"\n      action = \"scenario\"\n      \n  else:\n    # –£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –Ω–µ—Ç –≤ —Å–ø–∏—Å–∫–µ. –í–æ–∑–º–æ–∂–Ω–æ —ç—Ç–æ –æ–±—â–∞—è –∫–æ–º–∞–Ω–¥–∞\n    if device_action[0] == \"–°–≤–µ—Ç\":\n      # –û–±—â–∞—è –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è –≤—ã–∫–ª—é—á–µ–Ω–∏—è —Å–≤–µ—Ç–∞\n      data = []\n      for device_id in light_up:\n        cmd = {\n          \"type\": type,\n          \"action\": False,\n          \"device_id\": device_id,\n        }\n        data.append({\"json\": {\"data\": cmd}})\n      return data\n\n# –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏ —Ñ–æ—Ä–º–∏—Ä—É–µ–º –æ—Ç–≤–µ—Ç\nif action is not None:\n  data = {\n    \"type\": type,\n    \"action\": action,\n    \"device_id\": device_id,\n  }\n\nreturn [{\"json\": {\"data\": data}}]"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -112,
        1024
      ],
      "id": "38ce079e-fcc6-4cf9-9825-821b8e6098cc",
      "name": "–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è",
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "url": "https://api.iot.yandex.net/v1.0/user/info",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "OAuth y0__xCz9dpKGIv0OyDi3uOzFR-JFhcGUUpU-lK-xYzT8FIkJVEQ"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        -800,
        304
      ],
      "id": "9fbdc251-da02-49e3-9a19-d13fbcded7b5",
      "name": "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± —É–º–Ω–æ–º –¥–æ–º–µ"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.iot.yandex.net/v1.0/devices/actions",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "OAuth y0__xCz9dpKGIv0OyDi3uOzFR-JFhcGUUpU-lK-xYzT8FIkJVEQ"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "{\n    \"devices\": [\n        {\n            \"id\": \"9af46f0f-c0b5-4604-9240-476eea453f8f\",\n            \"actions\": [\n                {\n                    \"type\": \"devices.capabilities.on_off\",\n                    \"state\": {\n                        \"instance\": \"on\",\n                        \"value\": true\n                    }\n                }\n            ]\n        }\n    ]\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        -528,
        304
      ],
      "id": "2a437612-be64-4348-8cf2-9696da3f9203",
      "name": "–ü—Ä–æ–±–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è"
    },
    {
      "parameters": {
        "content": "## –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ \n–î–ª—è –≤—ã–∫–ª—é—á–µ–Ω–∏—è –∏ –≤–∫–ª—é—á–µ–Ω–∏—è –º–µ–Ω—è—Ç—å true/false\n``` json\n\"state\": {\n    \"instance\": \"on\",\n    \"value\": true\n }\n```",
        "height": 208
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -560,
        64
      ],
      "typeVersion": 1,
      "id": "6b10d7bb-b486-4adc-b158-a20a471dbf94",
      "name": "Sticky Note1"
    },
    {
      "parameters": {
        "content": "## –Ø–Ω–¥–µ–∫—Å\n\n### API –£–º–Ω—ã–π –¥–æ–º\nhttps://yandex.ru/dev/dialogs/smart-home/doc/ru/concepts/platform-protocol\n\n### –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è\nhttps://oauth.yandex.ru/client/new/api\n\n### –°—Ç–∞—Ç—å—è –ø—Ä–æ –æ—Ç–ª–∞–¥–∫—É —Ç–æ–∫–µ–Ω–∞ (Debug Token): \nhttps://yandex.ru/dev/id/doc/ru/tokens/debug-token\n\n1. –ó–∞–π—Ç–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç\n2. –ü–µ—Ä–µ–π—Ç–∏ –∫ —Å–æ–∑–¥–∞–Ω–∏—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è\n3. –ù–∞–∑–≤–∞–Ω–∏–µ - –ª—é–±–æ–µ\n4. –î–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º\n    - iot: view - —Å–ø–∏—Å–æ–∫ —É—Å—Ç—Ä–æ–π—Å—Ç–≤\n    - iot: control -  —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏\n5. –í –ø–æ–ª–µ Redirect URI –≤–≤–µ–¥–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ\nhttps://oauth.yandex.ru/verification_code \n6. –°–æ–∑–¥–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ\n7. –ù–∞ –Ω–æ–≤–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∫–æ–ø–∏—Ä—É–µ–º Client ID\n8. –ü–µ—Ä–µ—Ö–æ–¥ –ø–æ —Å—Å—ã–ª–∫–µ –≤–∏–¥–∞:\nhttps://oauth.yandex.ru/authorize?response_type=token&client_id=<–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è>\n9. –ö–æ–ø–∏—Ä—É–µ–º –ø–æ–ª—É—á–µ–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω, –µ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å—Ç—Ä–æ–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.\n",
        "height": 768,
        "width": 560
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -1488,
        64
      ],
      "typeVersion": 1,
      "id": "c43daeb3-eed5-4e92-86c6-54f8e0cf1354",
      "name": "Sticky Note2"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.iot.yandex.net/v1.0/scenarios/90632374-cc25-4911-81a7-5792fa888a16/actions",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "OAuth y0__xCz9dpKGIv0OyDi3uOzFR-JFhcGUUpU-lK-xYzT8FIkJVEQ"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        96,
        304
      ],
      "id": "592ace33-3aab-48e9-ba84-28fa01eccdfc",
      "name": "–ü—Ä–æ–±–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è1"
    },
    {
      "parameters": {
        "content": "## –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏—è\nhttps://yandex.ru/dev/dialogs/smart-home/doc/ru/concepts/platform-scenario\n\n–ê–¥—Ä–µ—Å –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Å—Ü–µ–Ω–∞—Ä–∏—è: `https://api.iot.yandex.net/v1.0/scenarios/{scenario_id}/actions`\n\nPOST –∑–∞–ø—Ä–æ—Å –±–µ–∑ —Ç–µ–ª–∞. –ü—Ä–∏–º–µ—Ä (–¥–ª—è –¥–æ–º–æ—Ñ–æ–Ω–∞): \n\nhttps://api.iot.yandex.net/v1.0/scenarios/90632374-cc25-4911-81a7-5792fa888a16/actions",
        "height": 272,
        "width": 400
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        0,
        0
      ],
      "typeVersion": 1,
      "id": "4f7aae7c-41d2-4bea-b20b-db252e3508ec",
      "name": "Sticky Note3"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "923f3c47-f0e8-4582-a293-ce320e67a5a7",
              "leftValue": "={{ $json.data.type }}",
              "rightValue": "scenario",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            },
            {
              "id": "eb4f00c7-84ad-4763-8e38-ee401014bad5",
              "leftValue": "",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        96,
        1024
      ],
      "id": "70132fa9-4f42-430d-909c-6cda5e9e01d7",
      "name": "If"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.iot.yandex.net/v1.0/devices/actions",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "OAuth y0__xCz9dpKGIv0OyDi3uOzFR-JFhcGUUpU-lK-xYzT8FIkJVEQ"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n    \"devices\": [\n        {\n            \"id\": \"{{ $json.data.device_id }}\",\n            \"actions\": [\n                {\n                    \"type\": \"devices.capabilities.on_off\",\n                    \"state\": {\n                        \"instance\": \"on\",\n                        \"value\": {{ $json.data.action }}\n                    }\n                }\n            ]\n        }\n    ]\n}",
        "options": {
          "timeout": 500
        }
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        320,
        1120
      ],
      "id": "f51411e1-8877-4735-a475-184b70771d54",
      "name": "–î–µ–π—Å—Ç–≤–∏–µ —Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ–º",
      "retryOnFail": true,
      "waitBetweenTries": 200,
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "=https://api.iot.yandex.net/v1.0/scenarios/{{ $json.data.device_id }}/actions",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "OAuth y0__xCz9dpKGIv0OyDi3uOzFR-JFhcGUUpU-lK-xYzT8FIkJVEQ"
            }
          ]
        },
        "options": {
          "timeout": 500
        }
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        320,
        928
      ],
      "id": "9df1565a-221f-41ad-a168-7aa3f956d93b",
      "name": "–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏—è",
      "retryOnFail": true,
      "waitBetweenTries": 200
    },
    {
      "parameters": {
        "jsCode": "// –í—ã—è—Å–Ω—è–µ–º –∫—Ç–æ —á—Ç–æ —Å–¥–µ–ª–∞–ª –∏ –≥–æ—Ç–æ–≤–∏–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏—è\n\n// –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ —Å–æ–æ–±—â–µ–Ω–∏—è (–ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞—è, —á—Ç–æ _items –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ –≤ –≤–∞—à–µ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏)\nconst message = $input.first().json.callback_query;\n\n// –£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞\nconst devicesId = {\n  \"–í–∞–Ω–Ω–∞—è\": \"2f9f9cc8-ada2-4bde-bd85-b9885ae28f36\",\n  \"–ö–æ—Ä–∏–¥–æ—Ä\": \"65bcfad0-4759-4cb7-8654-7584b2fc96d0\",\n  \"–ö—É—Ö–Ω—è\": \"a56d4cb7-621e-44ba-b825-4e9606a7acb4\",\n  \"–ó–∞–ª\": \"b0adbe30-5b28-40d1-9bf2-ba15aadd70bb\",\n  \"–°–ø–∞–ª—å–Ω—è\": \"9af46f0f-c0b5-4604-9240-476eea453f8f\",\n  \"–õ–µ–Ω—Ç–∞\": \"\",\n  \"–ü—ã–ª–µ—Å–æ—Å\": \"2d5b0ab8-7880-4d79-a368-6120be845bfc\",\n  \"–®—Ç–æ—Ä—ã\": \"0197d9e0-ca35-4ea2-a31a-51516c63cdfe\",\n  \"–î–æ–º–æ—Ñ–æ–Ω\": \"90632374-cc25-4911-81a7-5792fa888a16\"\n};\n\n// –¢–æ–ª—å–∫–æ –≤–µ—Ä—Ö–Ω–∏–π —Å–≤–µ—Ç\nconst lightUp = [\n  \"2f9f9cc8-ada2-4bde-bd85-b9885ae28f36\",  // –í–∞–Ω–Ω–∞—è\n  \"65bcfad0-4759-4cb7-8654-7584b2fc96d0\",  // –ö–æ—Ä–∏–¥–æ—Ä\n  \"a56d4cb7-621e-44ba-b825-4e9606a7acb4\",  // –ö—É—Ö–Ω—è\n  \"b0adbe30-5b28-40d1-9bf2-ba15aadd70bb\",  // –ó–∞–ª\n  \"f6826740-39db-484e-9e3e-2b2a7ed2f5ee\"   // –°–ø–∞–ª—å–Ω—è\n];\n\nconst key = message.data; // –ü—Ä–∏—à–ª–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –∫–Ω–æ–ø–∫–∏\nconst deviceAction = key.split(\"_\"); // –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –∏ –¥–µ–π—Å—Ç–≤–∏–µ\n\nlet data = {}; // –û—Ç–≤–µ—Ç (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –æ–±—ä–µ–∫—Ç)\n\nif (deviceAction.length === 2) {\n  let action = null;\n  let type = \"action\";\n  let deviceId;\n  const [deviceName, actionType] = deviceAction; // –î–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏–∑–∞—Ü–∏—è –¥–ª—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏\n\n  if (deviceName in devicesId) {\n    deviceId = devicesId[deviceName];\n\n    if (actionType === \"off\") {\n      action = false;\n    } else if (actionType === \"on\") {\n      action = true;\n    } else if (actionType === \"scenario\") {\n      type = \"scenario\";\n      action = \"scenario\";\n    }\n\n  } else {\n    // –£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –Ω–µ—Ç –≤ —Å–ø–∏—Å–∫–µ. –í–æ–∑–º–æ–∂–Ω–æ —ç—Ç–æ –æ–±—â–∞—è –∫–æ–º–∞–Ω–¥–∞\n    if (deviceName === \"–°–≤–µ—Ç\") {\n      // –û–±—â–∞—è –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è –≤—ã–∫–ª—é—á–µ–Ω–∏—è —Å–≤–µ—Ç–∞\n      const responseDataList = [];\n      for (const id of lightUp) {\n        const cmd = {\n          \"type\": type,\n          \"action\": false,\n          \"device_id\": id,\n        };\n        responseDataList.push({\"json\": {\"data\": cmd}});\n      }\n      // –í–Ω–∏–º–∞–Ω–∏–µ: –ó–¥–µ—Å—å –º—ã –∏–º–∏—Ç–∏—Ä—É–µ–º \"return data\" –∏–∑ Python, \n      // —Å—Ä–∞–∑—É –≤–æ–∑–≤—Ä–∞—â–∞—è –º–∞—Å—Å–∏–≤ –∏ –∑–∞–≤–µ—Ä—à–∞—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞.\n      return responseDataList;\n      // data = responseDataList; // –ó–∞–º–µ–Ω—è–µ–º –æ–±—ä–µ–∫—Ç –Ω–∞ –º–∞—Å—Å–∏–≤\n    }\n  }\n\n  // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏ —Ñ–æ—Ä–º–∏—Ä—É–µ–º –æ—Ç–≤–µ—Ç –¥–ª—è –æ–¥–∏–Ω–æ—á–Ω–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è\n  if (action !== null && deviceId) {\n    data = {\n      \"type\": type,\n      \"action\": action,\n      \"device_id\": deviceId,\n    };\n  }\n}\n\nreturn [{\"json\": {\"data\": data}}]; // –ò—Ç–æ–≥–æ–≤—ã–π –≤–æ–∑–≤—Ä–∞—Ç –¥–∞–Ω–Ω—ã—Ö, –µ—Å–ª–∏ data –Ω–µ –º–∞—Å—Å–∏–≤\n\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -112,
        1184
      ],
      "id": "d803f92b-cc6e-4cd4-9283-43ea5115811b",
      "name": "Code in JavaScript1"
    },
    {
      "parameters": {
        "language": "pythonNative",
        "pythonCode": "# –ö—Ç–æ –º–æ–∂–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å\ntrue_ids = [249503190, 326830581]\n\nquery = _items[0][\"json\"]\n\nfrom_id = 0\nif query.get(\"message\"):\n  from_id = query[\"message\"][\"from\"][\"id\"]\nelse:\n  from_id = query[\"callback_query\"][\"from\"][\"id\"]\n\nif from_id in true_ids:\n  return query\nreturn [{\"json\": {}}]"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -560,
        832
      ],
      "id": "077811ca-5e82-45a9-a4e1-b049e7798442",
      "name": "–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è py"
    },
    {
      "parameters": {
        "jsCode": "// –ö—Ç–æ –º–æ–∂–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å\nconst true_ids = [249503190, 326830581];\n\nconst query = $input.first().json;\n\nlet from_id = 0;\nif (query.message) {\n  from_id = query.message.from.id;\n} else {\n  from_id = query.callback_query.from.id;\n}\n\nif (true_ids.includes(from_id)) {\n  return query;\n}\n\nreturn [{ json: {} }];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -560,
        1008
      ],
      "id": "b71a73c0-8bce-4087-94d6-276480818ba5",
      "name": "–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è"
    }
  ],
  "pinData": {},
  "repo_name": "N8N",
  "repo_owner": "avdivo",
  "repo_path": "",
  "settings": {
    "executionOrder": "v1",
    "binaryMode": "separate",
    "availableInMCP": false
  },
  "shared": [
    {
      "updatedAt": "2026-02-04T11:55:28.236Z",
      "createdAt": "2026-02-04T11:55:28.236Z",
      "role": "workflow:owner",
      "workflowId": "d9WBjvBuF5ARKm3RvgqSp",
      "projectId": "MOQYETgRhtmQM3jW"
    }
  ],
  "staticData": null,
  "tags": [],
  "triggerCount": 1,
  "updatedAt": "2026-02-04T11:56:17.132Z",
  "versionId": "fb3fbc57-9f72-4528-b165-44f47a274486"
}